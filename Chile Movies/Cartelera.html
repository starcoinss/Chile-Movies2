<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chile Movies</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"> <!-- Incluyendo Bootstrap -->
    <link rel="stylesheet" href="css/styles.css">
    <style>
        #successMessage {
            position: fixed; /* Hace que el mensaje esté en una posición fija */
            top: 50%; /* Centra verticalmente */
            left: 50%; /* Centra horizontalmente */
            transform: translate(-50%, -50%); /* Ajusta la posición para que esté perfectamente centrado */
            z-index: 1050; /* Asegura que esté por encima de otros elementos */
            display: none; /* Inicialmente oculto */
        }
    </style>
</head>
<body>
    <!-- Menú de navegación -->
    <header>
        <h1>Chile Movies - Cartelera</h1>
        <nav>
            <ul>
                <li><a href="Inicio.html">Inicio</a></li>
                <li><a href="Inicio de Sesion.html">Inicio de Sesion</a></li>
                <li><a href="Cartelera.html">Cartelera</a></li>
                <li><a href="Comida cine.html">Comida</a></li>
            </ul>
        </nav>
    </header>

    <main class="container mt-4">
        <h2>Cartelera</h2>
        <div class="row">
            <!-- Tarjeta 1 -->
            <div class="col-md-4 mb-4">
                <div class="card">
                    <img src="imagenes/batman.jpg" class="card-img-top" alt="Batman">
                    <div class="card-body">
                        <h5 class="card-title">Batman</h5>
                        <p class="card-text">Únete a Batman en su lucha contra el crimen en Gotham City. Una aventura llena de acción, misterio y héroes.</p>
                        <p class="card-text"><strong>Precio: $5500</strong></p>
                        <p class="card-text"><strong>Valoración: ⭐⭐⭐⭐⭐</strong></p>
                        <button class="btn btn-primary comprar-btn" onclick="agregarAlCarrito('Batman', 5500)">Comprar</button>
                    </div>
                </div>
            </div>
            <!-- Tarjeta 2 -->
            <div class="col-md-4 mb-4">
                <div class="card">
                    <img src="imagenes/Transformers One.jpg" class="card-img-top" alt="Transformers">
                    <div class="card-body">
                        <h5 class="card-title">Transformers</h5>
                        <p class="card-text">Los Transformers regresan con una nueva historia llena de emoción y efectos especiales impresionantes.</p>
                        <p class="card-text"><strong>Precio: $6000</strong></p>
                        <p class="card-text"><strong>Valoración: ⭐⭐⭐⭐</strong></p>
                        <button class="btn btn-primary comprar-btn" onclick="agregarAlCarrito('Transformers', 6000)">Comprar</button>
                    </div>
                </div>
            </div>
            <!-- Tarjeta 3 -->
            <div class="col-md-4 mb-4">
                <div class="card">
                    <img src="imagenes/Coraline-y-la-Puerta-Secreta-vuelve-a-Cinemark.jpg" class="card-img-top" alt="Coraline">
                    <div class="card-body">
                        <h5 class="card-title">Coraline y la Puerta Secreta</h5>
                        <p class="card-text">Acompaña a Coraline en su aventura a través de una puerta secreta a un mundo alternativo. Una experiencia de animación inolvidable.</p>
                        <p class="card-text"><strong>Precio: $5000</strong></p>
                        <p class="card-text"><strong>Valoración: ⭐⭐⭐⭐⭐</strong></p>
                        <button class="btn btn-primary comprar-btn" onclick="agregarAlCarrito('Coraline', 5000)">Comprar</button>
                    </div>
                </div>
            </div>
            <!-- Tarjeta 4 -->
            <div class="col-md-4 mb-4">
                <div class="card">
                    <img src="imagenes/kung fu panda 4.jpg" class="card-img-top" alt="Kung Fu Panda 4">
                    <div class="card-body">
                        <h5 class="card-title">Kung Fu Panda 4</h5>
                        <p class="card-text">¡El panda Po regresa en otra aventura cómica llena de acción y sabiduría!</p>
                        <p class="card-text"><strong>Precio: $6000</strong></p>
                        <p class="card-text"><strong>Valoración: ⭐⭐⭐⭐⭐</strong></p>
                        <button class="btn btn-primary comprar-btn" onclick="agregarAlCarrito('Kung Fu Panda 4', 6000)">Comprar</button>
                    </div>
                </div>
            </div>
            <!-- Tarjeta 5 -->
            <div class="col-md-4 mb-4">
                <div class="card">
                    <img src="imagenes/shaolin soccer.jpg" class="card-img-top" alt="Shaolin Soccer">
                    <div class="card-body">
                        <h5 class="card-title">Shaolin Soccer</h5>
                        <p class="card-text">Un grupo de monjes shaolín descubre el fútbol y transforma el juego en una emocionante competición.</p>
                        <p class="card-text"><strong>Precio: $4000</strong></p>
                        <p class="card-text"><strong>Valoración: ⭐⭐⭐⭐</strong></p>
                        <button class="btn btn-primary comprar-btn" onclick="agregarAlCarrito('Shaolin Soccer', 4000)">Comprar</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Carrito de Compras -->
        <div class="mt-4">
            <h3>Carrito de Compras</h3>
            <ul id="carrito" class="list-group"></ul>
            <h4 id="total" class="mt-2">Total: $0</h4>
        </div>

        <!-- Ventana emergente para ingresar datos -->
        <div class="modal fade" id="purchaseModal" tabindex="-1" role="dialog" aria-labelledby="purchaseModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="purchaseModalLabel">Detalles de Compra</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form id="purchaseForm">
                            <div class="form-group">
                                <label for="name">Nombre</label>
                                <input type="text" class="form-control" id="name" required>
                            </div>
                            <div class="form-group">
                                <label for="email">Correo Electrónico</label>
                                <input type="email" class="form-control" id="email" required>
                            </div>
                            <button type="submit" class="btn btn-primary">Comprar</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Mensaje de compra exitosa -->
        <div id="successMessage" class="alert alert-success" role="alert">
            Compra exitosa
        </div>
    </main>

    <!-- Scripts de Bootstrap -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        let carrito = [];
        let total = 0;

        function agregarAlCarrito(pelicula, precio) {
            carrito.push({ pelicula, precio });
            total += precio;
            actualizarCarrito();
        }

        function eliminarDelCarrito(indice) {
            total -= carrito[indice].precio; // Resta el precio del artículo eliminado
            carrito.splice(indice, 1); // Elimina el artículo del carrito
            actualizarCarrito();
        }

        function actualizarCarrito() {
            const carritoElement = document.getElementById('carrito');
            carritoElement.innerHTML = '';
            carrito.forEach((item, index) => {
                const li = document.createElement('li');
                li.className = 'list-group-item d-flex justify-content-between align-items-center';
                li.innerText = `${item.pelicula} - $${item.precio}`;
                
                const btnEliminar = document.createElement('button');
                btnEliminar.className = 'btn btn-danger btn-sm';
                btnEliminar.innerText = 'Eliminar';
                btnEliminar.onclick = () => eliminarDelCarrito(index);
                
                li.appendChild(btnEliminar);
                carritoElement.appendChild(li);
            });
            document.getElementById('total').innerText = `Total: $${total}`;
        }

        document.getElementById('purchaseForm').onsubmit = function(event) {
            event.preventDefault();
            // Aquí puedes agregar lógica para procesar la compra
            $('#purchaseModal').modal('hide'); // Oculta el modal
            document.getElementById('purchaseForm').reset(); // Resetea el formulario
            carrito = []; // Limpia el carrito
            total = 0; // Reinicia el total
            actualizarCarrito(); // Actualiza la visualización del carrito
            mostrarMensajeExito(); // Muestra el mensaje de éxito
        };

        function mostrarMensajeExito() {
            const successMessage = document.getElementById('successMessage');
            successMessage.style.display = 'block';
            setTimeout(() => {
                successMessage.style.display = 'none';
            }, 2000); // Oculta el mensaje después de 2 segundos
        }
    </script>
</body>
</html>
